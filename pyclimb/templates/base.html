{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}PyClimb{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'pyclimb/images/favicon.png' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;500;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    {% block extra_head %}{% endblock %}
    <style>
      :root {
        --bg: #f4f1ea;
        --ink: #222013;
        --accent: #f59b67;
        --accent-deep: #e08a55;
        --accent-soft: #e9c282;
        --card: #ffffff;
        --muted: #6c6555;
        --ring: rgba(245, 155, 103, 0.3);
        --success: #d98b63;
        --error: #c0392b;
        --warning: #e9c282;
        --pixel-border: #2f2418;
        --pixel-shadow: 3px 3px 0 #c67a49;
        --font-body: "Pixelify Sans", "Courier New", monospace;
        --font-display: "Press Start 2P", "Courier New", monospace;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: var(--font-body);
        color: var(--ink);
        background: radial-gradient(1200px 600px at 10% 0%, #fff4de 0%, var(--bg) 60%);
        min-height: 100vh;
      }
      h1, h2, h3, h4, h5, h6,
      nav.site-nav .brand {
        font-family: var(--font-display);
      }
      
      /* Navigation */
      nav.site-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 24px;
        background:
          linear-gradient(90deg, rgba(255, 247, 232, 0.95), rgba(255, 255, 255, 0.98)),
          radial-gradient(600px 120px at 10% 0%, rgba(245, 155, 103, 0.18), transparent 70%);
        border-bottom: 1px solid #efe1c8;
        box-shadow: 0 2px 0 #e7d5b2;
      }
      nav.site-nav .brand {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        height: 48px;
        font-size: 1.4rem;
        font-weight: 600;
        color: var(--ink);
        text-decoration: none;
        letter-spacing: 0.02em;
      }
      nav.site-nav .brand img {
        height: 48px;
        width: 48px;
        display: block;
        object-fit: cover;
        object-position: center;
        transform: scale(3.2) translateY(2px);
        transform-origin: center;
        filter: drop-shadow(0 6px 10px rgba(34, 32, 19, 0.2));
      }
      nav.site-nav .brand:hover {
        color: var(--accent);
      }
      nav.site-nav .nav-links {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      nav.site-nav .nav-links a {
        color: #4a4234;
        text-decoration: none;
        font-size: 0.92rem;
        font-weight: 600;
        letter-spacing: 0.02em;
        padding: 8px 14px;
        border-radius: 0;
        background: #fff8e8;
        border: 2px solid var(--pixel-border);
        box-shadow: 2px 2px 0 #d8a46f;
        transition: all 0.12s ease;
      }
      nav.site-nav .nav-links a:hover {
        color: #1e1a14;
        background: #ffd09a;
        border-color: var(--pixel-border);
        box-shadow: 1px 1px 0 #b96d39;
        transform: translate(1px, 1px);
      }
      nav.site-nav .user-info {
        color: var(--muted);
        font-size: 0.95rem;
      }
      nav.site-nav .user-info strong {
        color: var(--ink);
      }
      nav.site-nav .nav-logout-btn {
        background: #ffe2bf;
        border: 2px solid var(--pixel-border);
        color: #5a3a29;
        font-family: inherit;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        padding: 8px 14px;
        border-radius: 0;
        letter-spacing: 0.02em;
        box-shadow: 2px 2px 0 #d59a62;
        transition: all 0.12s ease;
      }
      nav.site-nav .nav-logout-btn:hover {
        color: #1e1a14;
        background: #ffc887;
        border-color: var(--pixel-border);
        box-shadow: 1px 1px 0 #b96d39;
        transform: translate(1px, 1px);
      }
      
      /* Main content wrapper */
      .page-content {
        max-width: 960px;
        margin: 0 auto;
        padding: 24px 20px 64px;
      }
      
      /* Common elements */
      a.back {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.95rem;
        letter-spacing: 0.02em;
      }
      .section {
        margin-top: 22px;
        padding: 20px 24px;
        background: var(--card);
        border-radius: 0;
        border: 2px solid var(--pixel-border);
        box-shadow: 4px 4px 0 #e7d5b2;
      }
      .section h2 {
        margin: 0 0 16px;
        font-size: 1.2rem;
        letter-spacing: 0.02em;
      }
      .btn {
        display: inline-block;
        padding: 12px 28px;
        font-family: inherit;
        font-size: 1rem;
        font-weight: 600;
        color: white;
        background: var(--accent);
        border: 2px solid var(--pixel-border);
        border-radius: 0;
        cursor: pointer;
        text-decoration: none;
        letter-spacing: 0.02em;
        box-shadow: var(--pixel-shadow);
        transition: all 0.12s ease;
      }
      .btn:hover {
        background: #ec8d59;
        transform: translate(1px, 1px);
        box-shadow: 2px 2px 0 #a9653a;
      }
      .muted {
        color: var(--muted);
      }
      button,
      input:not([type="checkbox"]):not([type="radio"]):not([type="hidden"]),
      select,
      textarea {
        border-radius: 0 !important;
        border: 2px solid var(--pixel-border);
        box-shadow: 2px 2px 0 #e3bb8f;
      }
      input:focus,
      select:focus,
      textarea:focus,
      button:focus-visible {
        outline: 2px solid #ffd09a;
        outline-offset: 1px;
      }
      .card,
      .panel,
      .alert,
      .table-wrap {
        border-radius: 0 !important;
      }

      /* Footer */
      .site-footer {
        margin-top: 48px;
        padding: 36px 24px 48px;
        background:
          linear-gradient(180deg, rgba(255, 247, 232, 0.96), rgba(255, 255, 255, 0.98)),
          radial-gradient(600px 120px at 10% 0%, rgba(245, 155, 103, 0.2), transparent 70%);
        border-top: 1px solid #efe1c8;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
      }
      .site-footer .footer-grid {
        max-width: 960px;
        margin: 0 auto;
        display: grid;
        gap: 24px;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      .site-footer h4 {
        margin: 0 0 10px;
        font-size: 1rem;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        color: #4a4234;
      }
      .site-footer p {
        margin: 0 0 6px;
        color: var(--muted);
        font-size: 0.95rem;
      }
      .site-footer a {
        color: #4a4234;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
      }
      .site-footer a:hover {
        color: var(--accent);
      }
      .site-footer a.btn,
      .site-footer a.btn:hover {
        color: #fff;
      }
      .footer-links {
        display: grid;
        gap: 8px;
      }
      .footer-links .inline-links {
        display: grid;
        gap: 6px;
      }
      .footer-socials {
        display: flex;
        gap: 10px;
        margin-top: 6px;
      }
      .footer-socials a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 0;
        border: 2px solid var(--pixel-border);
        background: #fff8e8;
        box-shadow: 2px 2px 0 #d8a46f;
      }
      .footer-socials svg {
        width: 18px;
        height: 18px;
      }
      .footer-cta {
        display: grid;
        gap: 12px;
      }
      .footer-cta .btn {
        width: fit-content;
        padding: 10px 18px;
      }
      .footer-bottom {
        max-width: 960px;
        margin: 24px auto 0;
        padding-top: 16px;
        border-top: 1px solid #efe7d7;
        color: var(--muted);
        font-size: 0.9rem;
        text-align: center;
      }
      .submission-banner {
        max-width: 1100px;
        margin: 18px auto 0;
        padding: 12px 16px;
        border-radius: 0;
        background: #fff3cd;
        color: #7a4d00;
        border: 2px solid #7a4d00;
        box-shadow: 3px 3px 0 #d2a857;
        font-size: 0.95rem;
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .submission-banner strong {
        font-weight: 600;
      }
      @media (max-width: 640px) {
        .submission-banner {
          margin: 14px 16px 0;
        }
      }
      @media (max-width: 640px) {
        .site-footer {
          padding: 28px 18px 36px;
        }
        .site-footer .footer-grid {
          grid-template-columns: 1fr;
        }
        .footer-socials {
          justify-content: flex-start;
        }
      }
      
      {% block extra_styles %}{% endblock %}
    </style>
  </head>
  <body>
    <nav class="site-nav">
      <a class="brand" href="{% url 'home' %}">
        <img src="{% static 'pyclimb/images/logo.png' %}" alt="PyClimb logo">
      </a>
      <div class="nav-links">
        <a href="{% url 'problems:index' %}">Problems</a>
        <a href="{% url 'lessons:index' %}">Learn</a>
        <a href="{% url 'leaderboard' %}">Leaderboard</a>
        {% if user.is_authenticated %}
          <a href="{% url 'submissions:list' %}">My Submissions</a>
          {% if user.is_staff %}
            <a href="{% url 'lessons:teach_dashboard' %}">Teach</a>
          {% endif %}
          <a href="{% url 'profile' %}">{{ user.username }}</a>
          <form method="post" action="{% url 'logout' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="nav-logout-btn">Logout</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}">Login</a>
          <a href="{% url 'register' %}">Register</a>
        {% endif %}
      </div>
    </nav>
    
    {% if not submissions_enabled %}
      <div class="submission-banner" role="status" aria-live="polite">
        <strong>Submissions disabled:</strong>
        This deployment is running in read-only mode for safety. Code execution is not available here.
      </div>
    {% endif %}

    <div class="page-content">
      {% block content %}{% endblock %}
    </div>
    {% block footer %}
      <footer class="site-footer">
        <div class="footer-grid">
          <div class="footer-links">
            <h4>Contact</h4>
            <p>Julian Kim</p>
            <a href="tel:+14372365169">437-236-5169</a>
            <a href="mailto:j863kim@uwaterloo.ca">support@pyclimb.com</a>
          </div>
          <div class="footer-links">
            <h4>Explore</h4>
            <div class="inline-links">
              <a href="{% url 'problems:index' %}">Problems</a>
              <a href="{% url 'lessons:index' %}">Lessons</a>
              <a href="{% url 'leaderboard' %}">Leaderboard</a>
              <a href="{% url 'profile' %}">Account</a>
            </div>
          </div>
          <div class="footer-links">
            <h4>Legal</h4>
            <div class="inline-links">
              <a href="{% url 'privacy_policy' %}">Privacy Policy</a>
              <a href="{% url 'terms_of_service' %}">Terms of Service</a>
              <a href="{% url 'cookie_policy' %}">Cookie Policy</a>
            </div>
          </div>
          <div class="footer-links">
            <h4>Social</h4>
            <p class="muted">Follow our latest updates.</p>
            <div class="footer-socials">
              <a href="" aria-label="Instagram">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 3h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4zm5 5a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm6-2a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-6 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>
              </a>
              <a href="" aria-label="X">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.9 3H21l-6.4 7.3L22 21h-6.2l-4.9-6.2L5.6 21H3.5l6.9-7.8L2 3h6.3l4.4 5.7L18.9 3zm-1.1 16h1.8L6.2 5H4.3l13.5 14z"/></svg>
              </a>
              <a target=_blank href="https://github.com/juliank1m/pyclimb" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 0 0-3.2 19.5c.5.1.7-.2.7-.5v-1.7c-2.8.6-3.4-1.2-3.4-1.2-.5-1.1-1.1-1.4-1.1-1.4-.9-.6.1-.6.1-.6 1 .1 1.6 1 1.6 1 .9 1.6 2.4 1.1 3 .8.1-.7.3-1.1.6-1.3-2.2-.2-4.5-1.1-4.5-5a3.9 3.9 0 0 1 1-2.7 3.6 3.6 0 0 1 .1-2.7s.9-.3 2.8 1a9.7 9.7 0 0 1 5.1 0c2-1.3 2.8-1 2.8-1a3.6 3.6 0 0 1 .1 2.7 3.9 3.9 0 0 1 1 2.7c0 3.9-2.3 4.8-4.6 5 .4.3.7.8.7 1.7v2.5c0 .3.2.6.7.5A10 10 0 0 0 12 2z"/></svg>
              </a>
            </div>
          </div>
          <div class="footer-cta">
            <h4>Get Started</h4>
            <p class="muted">Ready to climb? Join new challenges every week.</p>
            {% if user.is_authenticated %}
              <a href="{% url 'problems:index' %}" class="btn">Explore Challenges</a>
            {% else %}
              <a href="{% url 'register' %}" class="btn">Create Account</a>
            {% endif %}
          </div>
        </div>
        <div class="footer-bottom">Â© 2026 PyClimb. All rights reserved.</div>
      </footer>
    {% endblock %}
  </body>
</html>
